"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6414],{3905:(t,e,n)=>{n.d(e,{Zo:()=>m,kt:()=>s});var a=n(67294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var d=a.createContext({}),p=function(t){var e=a.useContext(d),n=e;return t&&(n="function"==typeof t?t(e):l(l({},e),t)),n},m=function(t){var e=p(t.components);return a.createElement(d.Provider,{value:e},t.children)},N="mdxType",k={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},u=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,i=t.originalType,d=t.parentName,m=o(t,["components","mdxType","originalType","parentName"]),N=p(n),u=r,s=N["".concat(d,".").concat(u)]||N[u]||k[u]||i;return n?a.createElement(s,l(l({ref:e},m),{},{components:n})):a.createElement(s,l({ref:e},m))}));function s(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var i=n.length,l=new Array(i);l[0]=u;var o={};for(var d in e)hasOwnProperty.call(e,d)&&(o[d]=e[d]);o.originalType=t,o[N]="string"==typeof t?t:r,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},17833:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>d,contentTitle:()=>l,default:()=>N,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var a=n(87462),r=(n(67294),n(3905));const i={},l="Pinio & PinioBox",o={unversionedId:"wiki/archive/Pinio-and-PinioBox",id:"wiki/archive/Pinio-and-PinioBox",title:"Pinio & PinioBox",description:"Overview",source:"@site/docs/wiki/archive/Pinio-and-PinioBox.md",sourceDirName:"wiki/archive",slug:"/wiki/archive/Pinio-and-PinioBox",permalink:"/betaflight.com/docs/wiki/archive/Pinio-and-PinioBox",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"wiki",previous:{title:"Paralyze For Team Races",permalink:"/betaflight.com/docs/wiki/archive/Paralyze-for-Team-Races"},next:{title:"Presets 4.3",permalink:"/betaflight.com/docs/wiki/archive/Presets-in-BF-4.3"}},d={},p=[{value:"Overview",id:"overview",level:2},{value:"PINIO",id:"pinio",level:2},{value:"PINIO CONFIG",id:"pinio-config",level:2},{value:"PINIO BOX",id:"pinio-box",level:2},{value:"Examples",id:"examples",level:2},{value:"Find already defined PINIO functions",id:"find-already-defined-pinio-functions",level:3},{value:"Disable internal Bluetooth device, when craft gets armed",id:"disable-internal-bluetooth-device-when-craft-gets-armed",level:3},{value:"Disable external Bluetooth UART-Adapter, when the craft gets armed",id:"disable-external-bluetooth-uart-adapter-when-the-craft-gets-armed",level:3},{value:"Switch Bluetooth device on, when in Pit Mode",id:"switch-bluetooth-device-on-when-in-pit-mode",level:3},{value:"Switch VTX on/off using a USERn function controlled by the sender",id:"switch-vtx-onoff-using-a-usern-function-controlled-by-the-sender",level:3},{value:"FAQ",id:"faq",level:2}],m={toc:p};function N(t){let{components:e,...n}=t;return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"pinio--piniobox"},"Pinio & PinioBox"),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"PINIO is an abstraction of simple GPIO (General Purpose I/O) pin facility, and PINIO BOX is a facility to associate boxes (modes) to PINIO."),(0,r.kt)("li",{parentName:"ul"},"Most targets are build to be capable of configuring up to four pins for the PINIO facility, which can then be controlled by the PINIO BOX facility.")),(0,r.kt)("h2",{id:"pinio"},"PINIO"),(0,r.kt)("p",null,"An MCU pin can be assigned to ",(0,r.kt)("inlineCode",{parentName:"p"},"PINIO")," by ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," CLI command."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"resource PINIO <index> <pinID>\n")),(0,r.kt)("p",null,"Example of ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," with ",(0,r.kt)("inlineCode",{parentName:"p"},"PINIO"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[...]\nresource PINIO 1 A1\nresource PINIO 2 A8\nresource PINIO 3 C9\nresource PINIO 4 D2\n[...]\n")),(0,r.kt)("h2",{id:"pinio-config"},"PINIO CONFIG"),(0,r.kt)("p",null,"I/O configuration of each pin is specified by ",(0,r.kt)("inlineCode",{parentName:"p"},"pinio_config")," CLI variable, which is a comma separated list/array of 8-bit values. MSB represents inversion, and remaining 7-bits specify I/O mode as defined in ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/betaflight/betaflight/blob/master/src/main/drivers/pinio.h"},"drivers/pinio.h")," (Only push-pull output is defined for this PR)."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"PINIO CONFIG"),(0,r.kt)("th",{parentName:"tr",align:null},"HEX"),(0,r.kt)("th",{parentName:"tr",align:"right"},"DEC"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"PINIO_CONFIG_OUT_INVERTED"),(0,r.kt)("td",{parentName:"tr",align:null},"0x80"),(0,r.kt)("td",{parentName:"tr",align:"right"},"128")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"PINIO_CONFIG_MODE_MASK"),(0,r.kt)("td",{parentName:"tr",align:null},"0x7F"),(0,r.kt)("td",{parentName:"tr",align:"right"},"127")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"PINIO_CONFIG_MODE_OUT_PP"),(0,r.kt)("td",{parentName:"tr",align:null},"0x01"),(0,r.kt)("td",{parentName:"tr",align:"right"},"1")))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Note"),": Values can be combined together"),(0,r.kt)("p",null,"Example of ",(0,r.kt)("inlineCode",{parentName:"p"},"pinio_config")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"set pinio_config = 1,129,1,1\n")),(0,r.kt)("p",null,"Sets Output-Push-Pull for PINIO #1, #3 and #4, and Inverted Output-Push-Pull for PINIO #2."),(0,r.kt)("p",null,"Default value is ",(0,r.kt)("inlineCode",{parentName:"p"},"1")," (Output-Push-Pull)."),(0,r.kt)("h2",{id:"pinio-box"},"PINIO BOX"),(0,r.kt)("p",null,"CLI variable ",(0,r.kt)("inlineCode",{parentName:"p"},"pinio_box"),", comma separated list of permanent ID of boxes, associate the boxes to corresponding PINIOs. Once associated, the boxes's activation status are reflected to the associated PINIOs (and then to pins). Since the PINIO BOX facility has it's own capability of monitoring activation state of boxes, it operates independently from what boxes are meant for. (In other words, the PINIO BOX ",(0,r.kt)("strong",{parentName:"p"},"adds")," PINIO capability to boxes.)"),(0,r.kt)("p",null,"Permanent IDs ",(0,r.kt)("inlineCode",{parentName:"p"},"40")," through ",(0,r.kt)("inlineCode",{parentName:"p"},"43")," are user defined boxes, which are activated and appear as USER1 through USER4 in the list of boxes at places such as Modes tab in configurator."),(0,r.kt)("p",null,"Example of ",(0,r.kt)("inlineCode",{parentName:"p"},"pinio_box")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"set pinio_box = 0, 39, 43, 255\n")),(0,r.kt)("p",null,"With this assignment, PINIO #1 through #4 are associated with boxes as follow."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"th"},"PINIO")),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:"right"},"Permanent ID"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"1")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ARM")),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"0"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"2")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"VTX PIT MODE")),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"39"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"3")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"USER4")),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"43"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"4")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXID_NONE")),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"255"))))),(0,r.kt)("p",null,"For permanent ID of boxes (or AUX modes), the table below is based on ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/betaflight/betaflight/blob/master/src/main/msp/msp_box.c"},"msp/msp_box.c"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Box"),(0,r.kt)("th",{parentName:"tr",align:null},"Mode"),(0,r.kt)("th",{parentName:"tr",align:"right"},"ID"),(0,r.kt)("th",{parentName:"tr",align:null},"Notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXARM")),(0,r.kt)("td",{parentName:"tr",align:null},"ARM"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"0")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXANGLE")),(0,r.kt)("td",{parentName:"tr",align:null},"ANGLE"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"1")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXHORIZON")),(0,r.kt)("td",{parentName:"tr",align:null},"HORIZON"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"2")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXBARO")),(0,r.kt)("td",{parentName:"tr",align:null},"BARO"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"3")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXANTIGRAVITY")),(0,r.kt)("td",{parentName:"tr",align:null},"ANTI GRAVITY"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"4")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXMAG")),(0,r.kt)("td",{parentName:"tr",align:null},"MAG"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"5")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXHEADFREE")),(0,r.kt)("td",{parentName:"tr",align:null},"HEADFREE"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"6")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXHEADADJ")),(0,r.kt)("td",{parentName:"tr",align:null},"HEADADJ"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"7")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXCAMSTAB")),(0,r.kt)("td",{parentName:"tr",align:null},"CAMSTAB"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"8")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXCAMTRIG")),(0,r.kt)("td",{parentName:"tr",align:null},"CAMTRIG"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"9")),(0,r.kt)("td",{parentName:"tr",align:null},"(removed)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXGPSHOME")),(0,r.kt)("td",{parentName:"tr",align:null},"GPS HOME"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"10")),(0,r.kt)("td",{parentName:"tr",align:null},"(removed)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXGPSHOLD")),(0,r.kt)("td",{parentName:"tr",align:null},"GPS HOLD"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"11")),(0,r.kt)("td",{parentName:"tr",align:null},"(removed)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXPASSTHRU")),(0,r.kt)("td",{parentName:"tr",align:null},"PASSTHRU"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"12")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXBEEPERON")),(0,r.kt)("td",{parentName:"tr",align:null},"BEEPER"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"13")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXLEDMAX")),(0,r.kt)("td",{parentName:"tr",align:null},"LEDMAX"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"14")),(0,r.kt)("td",{parentName:"tr",align:null},"(removed)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXLEDLOW")),(0,r.kt)("td",{parentName:"tr",align:null},"LEDLOW"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"15")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXLLIGHTS")),(0,r.kt)("td",{parentName:"tr",align:null},"LLIGHTS"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"16")),(0,r.kt)("td",{parentName:"tr",align:null},"(removed)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXCALIB")),(0,r.kt)("td",{parentName:"tr",align:null},"CALIB"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"17")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXGOV")),(0,r.kt)("td",{parentName:"tr",align:null},"GOVERNOR"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"18")),(0,r.kt)("td",{parentName:"tr",align:null},"(removed)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXOSD")),(0,r.kt)("td",{parentName:"tr",align:null},"OSD DISABLE SW"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"19")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXTELEMETRY")),(0,r.kt)("td",{parentName:"tr",align:null},"TELEMETRY"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"20")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXGTUNE")),(0,r.kt)("td",{parentName:"tr",align:null},"GTUNE"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"21")),(0,r.kt)("td",{parentName:"tr",align:null},"(removed)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXRANGEFINDER")),(0,r.kt)("td",{parentName:"tr",align:null},"RANGEFINDER"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"22")),(0,r.kt)("td",{parentName:"tr",align:null},"(removed)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXSERVO1")),(0,r.kt)("td",{parentName:"tr",align:null},"SERVO1"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"23")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXSERVO2")),(0,r.kt)("td",{parentName:"tr",align:null},"SERVO2"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"24")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXSERVO3")),(0,r.kt)("td",{parentName:"tr",align:null},"SERVO3"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"25")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXBLACKBOX")),(0,r.kt)("td",{parentName:"tr",align:null},"BLACKBOX"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"26")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXFAILSAFE")),(0,r.kt)("td",{parentName:"tr",align:null},"FAILSAFE"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"27")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXAIRMODE")),(0,r.kt)("td",{parentName:"tr",align:null},"AIR MODE"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"28")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOX3D")),(0,r.kt)("td",{parentName:"tr",align:null},"DISABLE / SWITCH 3D"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"29")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXFPVANGLEMIX")),(0,r.kt)("td",{parentName:"tr",align:null},"FPV ANGLE MIX"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"30")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXBLACKBOXERASE")),(0,r.kt)("td",{parentName:"tr",align:null},"BLACKBOX ERASE (>30s)"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"31")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXCAMERA1")),(0,r.kt)("td",{parentName:"tr",align:null},"CAMERA CONTROL 1"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"32")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXCAMERA2")),(0,r.kt)("td",{parentName:"tr",align:null},"CAMERA CONTROL 2"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"33")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXCAMERA3")),(0,r.kt)("td",{parentName:"tr",align:null},"CAMERA CONTROL 3"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"34")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXFLIPOVERAFTERCRASH")),(0,r.kt)("td",{parentName:"tr",align:null},"FLIP OVER AFTER CRASH"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"35")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXPREARM")),(0,r.kt)("td",{parentName:"tr",align:null},"PREARM"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"36")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXBEEPGPSCOUNT")),(0,r.kt)("td",{parentName:"tr",align:null},"BEEP GPS SATELLITE COUNT"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"37")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOX3DONASWITCH")),(0,r.kt)("td",{parentName:"tr",align:null},"3D ON A SWITCH"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"38")),(0,r.kt)("td",{parentName:"tr",align:null},"(removed)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXVTXPITMODE")),(0,r.kt)("td",{parentName:"tr",align:null},"VTX PIT MODE"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"39")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXUSER1")),(0,r.kt)("td",{parentName:"tr",align:null},"USER1"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"40")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXUSER2")),(0,r.kt)("td",{parentName:"tr",align:null},"USER2"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"41")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXUSER3")),(0,r.kt)("td",{parentName:"tr",align:null},"USER3"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"42")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXUSER4")),(0,r.kt)("td",{parentName:"tr",align:null},"USER4"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"43")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXPIDAUDIO")),(0,r.kt)("td",{parentName:"tr",align:null},"PID AUDIO"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"44")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXPARALYZE")),(0,r.kt)("td",{parentName:"tr",align:null},"PARALYZE"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"45")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXGPSRESCUE")),(0,r.kt)("td",{parentName:"tr",align:null},"GPS RESCUE"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"46")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXACROTRAINER")),(0,r.kt)("td",{parentName:"tr",align:null},"ACRO TRAINER"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"47")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXVTXCONTROLDISABLE")),(0,r.kt)("td",{parentName:"tr",align:null},"DISABLE VTX CONTROL"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"48")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXLAUNCHCONTROL")),(0,r.kt)("td",{parentName:"tr",align:null},"LAUNCH CONTROL"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"49")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"BOXMSPOVERRIDE")),(0,r.kt)("td",{parentName:"tr",align:null},"MSP OVERRIDE"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("inlineCode",{parentName:"td"},"50")),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Note"),": Value 255 is defined as BOXID_NONE which specifies the specified slot is not used."),(0,r.kt)("h2",{id:"examples"},"Examples"),(0,r.kt)("p",null,"These are some ",(0,r.kt)("strong",{parentName:"p"},"general")," examples."),(0,r.kt)("p",null,"Some inbuilt or external devices/modules come with a dedicated pin/wire to enable/disable it. This depends on the device, but such a pin/wire is ",(0,r.kt)("em",{parentName:"p"},"necessary")," for the PINIO function to work the way it is supposed to. On some devices this pin needs to be set ",(0,r.kt)("inlineCode",{parentName:"p"},"HIGH/ON/1")," (about 3,3V ) to enable it, on others, it needs to be ",(0,r.kt)("inlineCode",{parentName:"p"},"LOW/OFF/0")," (about 0 V) to do the same. This really depends on the device."),(0,r.kt)("h3",{id:"find-already-defined-pinio-functions"},"Find already defined PINIO functions"),(0,r.kt)("p",null,"Some flight controller targets come with PINIOs ",(0,r.kt)("em",{parentName:"p"},"preconfigured"),", for example to switch the camera, the VTX supply voltage or an inbuilt Bluetooth device."),(0,r.kt)("p",null,"Check the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/betaflight/unified-targets/tree/master/configs/default"},"unified target configuration")," of ",(0,r.kt)("strong",{parentName:"p"},"your")," flight controller or use the ",(0,r.kt)("inlineCode",{parentName:"p"},"resource")," command on the running board, to find any existing PINIOs -- if any."),(0,r.kt)("p",null,"You may find something like ",(0,r.kt)("inlineCode",{parentName:"p"},"resource PINIO 1 B00")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"PINIO 1 B00"),". This shows us, that there is already a PINIO with the index of ",(0,r.kt)("inlineCode",{parentName:"p"},"1")," (PINIO #1)."),(0,r.kt)("p",null,"If you want to add additional PINIOs, ",(0,r.kt)("strong",{parentName:"p"},"make sure not to remove existing ones in the process, by incrementing the index!")),(0,r.kt)("h3",{id:"disable-internal-bluetooth-device-when-craft-gets-armed"},"Disable internal Bluetooth device, when craft gets armed"),(0,r.kt)("p",null,"Most flight controller targets with an inbuilt Bluetooth module, are already ",(0,r.kt)("em",{parentName:"p"},"preconfigured"),", so there is often no need to do anything at all!"),(0,r.kt)("p",null,"Still, it may be interesting to find out, if and how it is configured."),(0,r.kt)("p",null,"The configuration may look like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# resource\n[...]\nresource PINIO 1 B00\n[...]\n\n# get pinio_config\npinio_config = 129,1,1,1\nArray length: 4\n\n# get pinio_box\npinio_box = 0,255,255,255\nArray length: 4\nDefault value: 0,255,255,255\n")),(0,r.kt)("p",null,"This is PINIO #1(mapped to pin ",(0,r.kt)("inlineCode",{parentName:"p"},"B00"),"), so we only look at the ",(0,r.kt)("em",{parentName:"p"},"first")," of the four comma seperated values in the arrays."),(0,r.kt)("p",null,"The value of ",(0,r.kt)("inlineCode",{parentName:"p"},"pinio_box")," is ",(0,r.kt)("inlineCode",{parentName:"p"},"0"),", which -- according to the table above -- is set to the ",(0,r.kt)("inlineCode",{parentName:"p"},"BOXARM")," box/mode. So if the craft gets armed, this gets activated, too."),(0,r.kt)("p",null,"The value of ",(0,r.kt)("inlineCode",{parentName:"p"},"pinio_config")," is ",(0,r.kt)("inlineCode",{parentName:"p"},"129")," which -- very simply put -- means it is set to on/off mode ",(0,r.kt)("em",{parentName:"p"},"and")," also gets inverted. ",(0,r.kt)("em",{parentName:"p"},"Inverted")," means, is gets turned off, when the matching PINIO gets turned on -- and vice versa."),(0,r.kt)("p",null,"So if the craft gets armed, the ",(0,r.kt)("inlineCode",{parentName:"p"},"B00")," pin will be set to.... ",(0,r.kt)("inlineCode",{parentName:"p"},"LOW")," (about 0 V). In this example, this means, that the inbuilt Bluetooth module turns off, when it senses a LOW signal on this pin (simply because it's built this way)."),(0,r.kt)("h3",{id:"disable-external-bluetooth-uart-adapter-when-the-craft-gets-armed"},"Disable external Bluetooth UART-Adapter, when the craft gets armed"),(0,r.kt)("p",null,"This is bascially the same as with the internal module."),(0,r.kt)("p",null,"The only difference is, that you need to select a free pin to switch the device on and off and you need to know what type of signal (HIGH or LOW) your device expects."),(0,r.kt)("p",null,"Let's say you decide to use the otherwise unused PPM pin to switch your newly added Bluetooth module, which comes with an additional pin/wire that may be labeled POWER or ENABLE. The documentation of the module tells you, that the signal on this pin needs to be LOW for the module to turn off. Please note, that there ",(0,r.kt)("em",{parentName:"p"},"maybe")," pins on the breakout board of the Bluetooth module that aren't actually connected to anything!"),(0,r.kt)("p",null,"You also need to know if you already have on or more ",(0,r.kt)("inlineCode",{parentName:"p"},"PINIO")," functions configured (see above!)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"# resource\n[...]\nresource PPM B09\n[...]\nresource PINIO 1 C08\nresource PINIO 2 C09\n[...]\n\n# resource PPM none\nResource is freed\n\n# resource PINIO 3 B09\nResource is set to B09\n\n# get pinio_config\npinio_config = 1,1,1,1\nArray length: 4\n\n# set pinio_config = 1,1,129,1\npinio_config set to 1,1,129,1\n\n# get pinio_box\npinio_box = 40,41,255,255\n\n# set pinio_box = 40,41,0,255\npinio_box set to 40,41,0,255\n\n# save\n")),(0,r.kt)("p",null,"Some things to note here:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"There are already ",(0,r.kt)("em",{parentName:"p"},"two")," PINIO functions set up, so the one we add will be #3.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"We set the ",(0,r.kt)("em",{parentName:"p"},"third")," value of ",(0,r.kt)("inlineCode",{parentName:"p"},"pinio_config")," from ",(0,r.kt)("inlineCode",{parentName:"p"},"1")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"129")," (inversion), because the device shall switch ",(0,r.kt)("em",{parentName:"p"},"off")," when this box/mode turns ",(0,r.kt)("em",{parentName:"p"},"on"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"We set the ",(0,r.kt)("em",{parentName:"p"},"third")," value of ",(0,r.kt)("inlineCode",{parentName:"p"},"pinio_box")," from ",(0,r.kt)("inlineCode",{parentName:"p"},"255")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"0")," because we want to activate this, when the device is armed (see table above!).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Don't forget to save!"))),(0,r.kt)("h3",{id:"switch-bluetooth-device-on-when-in-pit-mode"},"Switch Bluetooth device on, when in Pit Mode"),(0,r.kt)("p",null,"This is the exact same setup as above, but instead of setting ",(0,r.kt)("inlineCode",{parentName:"p"},"pinio_box")," for PINIO #3 to ",(0,r.kt)("inlineCode",{parentName:"p"},"0"),", it is set to ",(0,r.kt)("inlineCode",{parentName:"p"},"39"),". Now the Bluetooth module will turn on, when in pit mode."),(0,r.kt)("h3",{id:"switch-vtx-onoff-using-a-usern-function-controlled-by-the-sender"},"Switch VTX on/off using a USERn function controlled by the sender"),(0,r.kt)("p",null,"This time, we want to switch the VTX with an actual switch on the sender. For this to work, we need"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"A VTX that comes with a pin to switch it off.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"A function on the flight controller board that allows to switch off the supply voltage for the VTX.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},'A simple circuit with a transistor, that gets placed between VTX supply voltage and VTX. There are ready made modules like "RealPit" available for this.'))),(0,r.kt)("p",null,"For this, we use one of the ",(0,r.kt)("inlineCode",{parentName:"p"},"BOXUSER<n>")," modes/boxes (IDs 40 to 43). This will add a matching User mode/function in the Modes tab of the Configurator, which can then be mapped to a channel on the sender."),(0,r.kt)("p",null,'Let\'s say we have a "clean" flight controller without any preconfigured PINIOs or User functions and the PPM pin is the one to be used for this:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"#resource\n[...]\nresource PPM B03\n[...]\n\n# resource PPM none\nResource is freed\n\n# resource PINIO 1 B03\nResource is set to B03\n\n# get pinio_box\npinio_box = 255,255,255,255\n\n# set pinio_box = 40,255,255,255\npinio_box set to 40,255,255,255\n\n# save\n")),(0,r.kt)("p",null,"Some things to note here:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"We don't change ",(0,r.kt)("inlineCode",{parentName:"p"},"pinio_config"),", since the example VTX will switch ",(0,r.kt)("em",{parentName:"p"},"on")," when the pin is pulled HIGH. So the default value of ",(0,r.kt)("inlineCode",{parentName:"p"},"1")," is fine.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"We set the first value of ",(0,r.kt)("inlineCode",{parentName:"p"},"pinio_box")," to ",(0,r.kt)("inlineCode",{parentName:"p"},"40"),", since this is the first and only User function on this board (again, see table above!).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The only thing left is now to map the function in the Modes tab of the Configurator (not, that this will only show up, after setting an ID of ",(0,r.kt)("inlineCode",{parentName:"p"},"40-43")," in ",(0,r.kt)("inlineCode",{parentName:"p"},"pinio_box"),").")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Don't forget to save!"))),(0,r.kt)("h2",{id:"faq"},"FAQ"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"None yet.")))}N.isMDXComponent=!0}}]);
"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6201],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=p(n),m=a,k=d["".concat(s,".").concat(m)]||d[m]||c[m]||l;return n?r.createElement(k,o(o({ref:t},u),{},{components:n})):r.createElement(k,o({ref:t},u))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:a,o[1]=i;for(var p=2;p<l;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},16374:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var r=n(87462),a=(n(67294),n(3905));const l={},o="Sonar",i={unversionedId:"development/Sonar",id:"development/Sonar",title:"Sonar",description:"A sonar sensor can be used to measure altitude for use with BARO and SONAR altitude",source:"@site/docs/development/Sonar.md",sourceDirName:"development",slug:"/development/Sonar",permalink:"/betaflight.com/docs/development/Sonar",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"development",previous:{title:"Serial",permalink:"/betaflight.com/docs/development/Serial"},next:{title:"Spektrum Bind Support",permalink:"/betaflight.com/docs/development/Spektrum bind"}},s={},p=[{value:"Hardware",id:"hardware",level:2},{value:"Connections",id:"connections",level:2},{value:"Naze/Flip32+",id:"nazeflip32",level:3},{value:"Constraints",id:"constraints",level:4},{value:"CC3D",id:"cc3d",level:3},{value:"Constraints",id:"constraints-1",level:4},{value:"SPRacingF3",id:"spracingf3",level:3},{value:"Constraints",id:"constraints-2",level:4}],u={toc:p};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"sonar"},"Sonar"),(0,a.kt)("p",null,"A sonar sensor can be used to measure altitude for use with BARO and SONAR altitude\nhold modes."),(0,a.kt)("p",null,"The sonar sensor is used instead of the pressure sensor (barometer) at low altitudes (less than about 3.5 meters above the ground).\nThe sonar sensor is only used when the aircraft inclination angle (attitude) is small (less than 22.5 degrees)."),(0,a.kt)("h2",{id:"hardware"},"Hardware"),(0,a.kt)("p",null,"Currently the main supported sensor is the HCSR04 sensor.\nThe Parallax 28015 single-wire sonar can also be used by connecting 1k resistors to the Trigger and Echo pins, and the other end of the resistors shorted together and to the Sonar module."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"          1k\nTRIGGER--/\\/\\--\\\n                \\_______ 28015 SONAR\n          1k    /\nECHO-----/\\/\\--/\n")),(0,a.kt)("h2",{id:"connections"},"Connections"),(0,a.kt)("h3",{id:"nazeflip32"},"Naze/Flip32+"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Mode"),(0,a.kt)("th",{parentName:"tr",align:null},"Trigger"),(0,a.kt)("th",{parentName:"tr",align:null},"Echo"),(0,a.kt)("th",{parentName:"tr",align:null},"Inline 1k resistors"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Parallel PWM/ADC current sensor"),(0,a.kt)("td",{parentName:"tr",align:null},"PB8 / Motor 5"),(0,a.kt)("td",{parentName:"tr",align:null},"PB9 / Motor 6"),(0,a.kt)("td",{parentName:"tr",align:null},"NO (5v tolerant)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"PPM/Serial RX"),(0,a.kt)("td",{parentName:"tr",align:null},"PB0 / RC7"),(0,a.kt)("td",{parentName:"tr",align:null},"PB1 / RC8"),(0,a.kt)("td",{parentName:"tr",align:null},"YES (3.3v input)")))),(0,a.kt)("h4",{id:"constraints"},"Constraints"),(0,a.kt)("p",null,"Current meter cannot be used in conjunction with Parallel PWM and Sonar."),(0,a.kt)("h3",{id:"cc3d"},"CC3D"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Trigger"),(0,a.kt)("th",{parentName:"tr",align:null},"Echo"),(0,a.kt)("th",{parentName:"tr",align:null},"Inline 1k resistors"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"PB5 / RC4"),(0,a.kt)("td",{parentName:"tr",align:null},"PB0 / RC5"),(0,a.kt)("td",{parentName:"tr",align:null},"YES (3.3v input)")))),(0,a.kt)("h4",{id:"constraints-1"},"Constraints"),(0,a.kt)("p",null,"Sonar cannot be used in conjuction with SoftSerial or Parallel PWM."),(0,a.kt)("h3",{id:"spracingf3"},"SPRacingF3"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Trigger"),(0,a.kt)("th",{parentName:"tr",align:null},"Echo"),(0,a.kt)("th",{parentName:"tr",align:null},"Inline 1k resistors"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"PB0 / RC7"),(0,a.kt)("td",{parentName:"tr",align:null},"PB1 / RC8"),(0,a.kt)("td",{parentName:"tr",align:null},"YES (3.3v input)")))),(0,a.kt)("h4",{id:"constraints-2"},"Constraints"),(0,a.kt)("p",null,"Sonar cannot be used in conjuction with SoftSerial2 or Parallel PWM."))}d.isMDXComponent=!0}}]);
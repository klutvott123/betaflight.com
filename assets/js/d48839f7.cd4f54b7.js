"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1693],{3905:(e,t,n)=>{n.d(t,{Zo:()=>f,kt:()=>h});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},f=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,f=i(e,["components","mdxType","originalType","parentName"]),c=p(n),u=a,h=c["".concat(s,".").concat(u)]||c[u]||d[u]||l;return n?r.createElement(h,o(o({ref:t},f),{},{components:n})):r.createElement(h,o({ref:t},f))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:a,o[1]=i;for(var p=2;p<l;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},94644:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>p});var r=n(87462),a=(n(67294),n(3905));const l={},o="Profiles (aka PID Profiles)",i={unversionedId:"development/Profiles",id:"development/Profiles",title:"Profiles (aka PID Profiles)",description:"A Profile is a set of performance-related configuration settings. PID values, Filter settings, Anti Gravity, Crash Recovery, and more. Currently, 3 Profiles are supported. The default Profile is profile 1 (profile 0 in CLI).",source:"@site/docs/development/Profiles.md",sourceDirName:"development",slug:"/development/Profiles",permalink:"/betaflight.com/docs/development/Profiles",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"development",previous:{title:"PID tuning",permalink:"/betaflight.com/docs/development/PID tuning"},next:{title:"RSSI",permalink:"/betaflight.com/docs/development/Rssi"}},s={},p=[{value:"Changing profiles",id:"changing-profiles",level:2},{value:"Changing Rate Profiles",id:"changing-rate-profiles",level:2},{value:"Using Diff and Dump to output only Profiles",id:"using-diff-and-dump-to-output-only-profiles",level:2}],f={toc:p};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"profiles-aka-pid-profiles"},"Profiles (aka PID Profiles)"),(0,a.kt)("p",null,"A Profile is a set of performance-related configuration settings. PID values, Filter settings, Anti Gravity, Crash Recovery, and more. Currently, 3 Profiles are supported. The default Profile is profile 1 (",(0,a.kt)("inlineCode",{parentName:"p"},"profile 0")," in CLI)."),(0,a.kt)("p",null,"Profiles offer another way to perform PID or Filter tuning (currently only Dterm filters). Say that Profile 1 can have default settings you can trust to get in the air and not damage your motors. But you want to try Dterm Bi-quad over PT1, increase P or decrease D values without sacrificing your day of flying. Profiles are perfect for this, edit any Profile when you're at the bench and select the profile when you're in the field. Quad not flying perfectly, merely change your profile back and continue flying."),(0,a.kt)("h2",{id:"changing-profiles"},"Changing profiles"),(0,a.kt)("p",null,"Profiles can be selected using the GUI, CLI, OSD or stick combinations. Once selected, changes to settings can be made and saved to the active Profile. Also worth mentioning when selecting a Profile, that Profile will remain the active Profile even over power cycles."),(0,a.kt)("p",null,"Betaflight Configurator (GUI): In the PID Tuning Tab > Select a Profile using the drop-down menu. Once a profile is chosen, that profile is activated for current use. Any modifications made are saved when pressing Save button."),(0,a.kt)("p",null,"OSD: Access CMS (Left Yaw + Pitch up) > Select ",(0,a.kt)("inlineCode",{parentName:"p"},"Profiles")," > Change ",(0,a.kt)("inlineCode",{parentName:"p"},"PID Prof"),"."),(0,a.kt)("p",null,"Stick combinations: When disarmed use the following stick commands to select a Profile. The status LED on your FC will flicker when changing the Profile."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Profile"),(0,a.kt)("th",{parentName:"tr",align:null},"Throttle"),(0,a.kt)("th",{parentName:"tr",align:null},"Yaw"),(0,a.kt)("th",{parentName:"tr",align:null},"Pitch"),(0,a.kt)("th",{parentName:"tr",align:null},"Roll"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"0"),(0,a.kt)("td",{parentName:"tr",align:null},"Down"),(0,a.kt)("td",{parentName:"tr",align:null},"Left"),(0,a.kt)("td",{parentName:"tr",align:null},"Middle"),(0,a.kt)("td",{parentName:"tr",align:null},"Left")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"1"),(0,a.kt)("td",{parentName:"tr",align:null},"Down"),(0,a.kt)("td",{parentName:"tr",align:null},"Left"),(0,a.kt)("td",{parentName:"tr",align:null},"Up"),(0,a.kt)("td",{parentName:"tr",align:null},"Middle")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"2"),(0,a.kt)("td",{parentName:"tr",align:null},"Down"),(0,a.kt)("td",{parentName:"tr",align:null},"Left"),(0,a.kt)("td",{parentName:"tr",align:null},"Middle"),(0,a.kt)("td",{parentName:"tr",align:null},"Right")))),(0,a.kt)("p",null,"CLI: the ",(0,a.kt)("inlineCode",{parentName:"p"},"profile")," command can be used to change the profile:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"profile <index>\n")),(0,a.kt)("p",null,"To save configuration changes:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"save\n")),(0,a.kt)("h1",{id:"rate-profiles"},"Rate Profiles"),(0,a.kt)("p",null,"A Rate Profile is a set of Rate related settings. These profiles store the settings for Rate Type, RC Rate, Super Rate, Expo for Pitch, Roll, & Yaw. Along with Throttle Expo and TPA settings."),(0,a.kt)("p",null,"Pre-BetaFlight 3.2 Profiles and Rate Profiles are coupled together. Each Profile had its own set of 3 Rate Profiles. Allowing up to 9 Rate Profiles all together.\nBetaflight 3.2 broke this link, giving us independent Profiles and Rate Profiles. Selecting Rate Profiles are independent of Profiles now. Allowing only 3 Rate Profiles.\nBetaFlight 3.3 > the number of Rate Profiles increased from 3 to 6 Rate Profiles."),(0,a.kt)("h2",{id:"changing-rate-profiles"},"Changing Rate Profiles"),(0,a.kt)("p",null,"Rate Profiles can be selected using a GUI, CLI, OSD, or AUX channel. Once selected (just like Profiles), changes to settings can be made and saved to the active Rate Profile. Also, when changing our Rate Profile that profile will remain the active Profile even over power cycles, except when using the AUX channel option. When BetaFlight boots the active profile is selected by the position of the AUX channel."),(0,a.kt)("p",null,"Betaflight Configurator (GUI): Click PID Tuning Tab > Select a Rate Profile using the drop-down menu. Once selected, any changes you make to your settings and click Save will be store to the selected Rate Profile. The action of selecting a Rate Profile also activates that rate profile for current use."),(0,a.kt)("p",null,"OSD: Access CMS (Left Yaw + Pitch up) > Select ",(0,a.kt)("inlineCode",{parentName:"p"},"Profiles")," > Change ",(0,a.kt)("inlineCode",{parentName:"p"},"Rate Prof"),". Make sure to Save + Exit or Save + Reboot to save settings."),(0,a.kt)("p",null,"Aux Channel (In-flight Adjustments): Adjustments need to be configured first using the GUI. You must have an available AUX channel configured on your radio.",(0,a.kt)("br",{parentName:"p"}),"\n","Enable Expert Mode in the Configurator > Click Adjustments\nClick the slider for If enable. Select the AUX # channel to use.\nFor the Range, Select the whole Range from 900 to 2100. Select Rate Profile Selection from the drop-down menu. Via Channel is the same as the AUX channel used."),(0,a.kt)("p",null,"CLI: the ",(0,a.kt)("inlineCode",{parentName:"p"},"rateprofile")," command can be used to change the profile:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"rateprofile <index>\n")),(0,a.kt)("p",null,"To save configuration changes:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"save\n")),(0,a.kt)("h1",{id:"backing-up-profiles-and-rate-profiles"},"Backing up Profiles and Rate Profiles"),(0,a.kt)("p",null,"Currently creating a backup from the GUI only backs up the active Profile and Rate Profile. So the best way to see and backup all Profiles is to use CLI."),(0,a.kt)("h2",{id:"using-diff-and-dump-to-output-only-profiles"},"Using Diff and Dump to output only Profiles"),(0,a.kt)("p",null,"Use these commands to view and back up the complete active profiles (including default settings): ",(0,a.kt)("inlineCode",{parentName:"p"},"dump profile"),", & ",(0,a.kt)("inlineCode",{parentName:"p"},"dump rates"),"\nIn order to see all Profiles configured add the ",(0,a.kt)("inlineCode",{parentName:"p"},"all")," variable: ",(0,a.kt)("inlineCode",{parentName:"p"},"dump all"),", & ",(0,a.kt)("inlineCode",{parentName:"p"},"diff all"),"\nUse these commands to view and back up the changes the active profiles -defaults settings: ",(0,a.kt)("inlineCode",{parentName:"p"},"diff profile"),", & ",(0,a.kt)("inlineCode",{parentName:"p"},"diff rates")),(0,a.kt)("p",null,"Examples:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"# diff rates\n\n# rateprofile\nrateprofile 0\n\nset roll_rc_rate = 200\nset pitch_rc_rate = 200\nset yaw_rc_rate = 200\nset roll_expo = 50\nset pitch_expo = 50\nset yaw_expo = 90\n\n# dump rates\n\n# rateprofile\nrateprofile 0\n\nset thr_mid = 50\nset thr_expo = 0\nset rates_type = BETAFLIGHT\nset roll_rc_rate = 200\nset pitch_rc_rate = 200\nset yaw_rc_rate = 200\nset roll_expo = 50\nset pitch_expo = 50\nset yaw_expo = 90\nset roll_srate = 70\nset pitch_srate = 70\nset yaw_srate = 70\nset tpa_rate = 10\nset tpa_breakpoint = 1650\nset throttle_limit_type = OFF\nset throttle_limit_percent = 100\n\n# diff profile\n\n# profile\nprofile 0\n\nset p_pitch = 40\nset d_pitch = 26\nset p_roll = 20\nset d_roll = 13\nset p_yaw = 80\n\n# dump profile\n\n# profile\nprofile 0\n\nset dterm_lowpass_type = PT1\nset dterm_lowpass_hz = 100\nset dterm_lowpass2_hz = 200\nset dterm_notch_hz = 0\nset dterm_notch_cutoff = 160\nset vbat_pid_gain = OFF\nset pid_at_min_throttle = ON\nset anti_gravity_mode = SMOOTH\nset anti_gravity_threshold = 250\nset anti_gravity_gain = 5000\nset feedforward_transition = 0\nset acc_limit_yaw = 100\nset acc_limit = 0\nset crash_dthreshold = 50\nset crash_gthreshold = 400\nset crash_setpoint_threshold = 350\nset crash_time = 500\nset crash_delay = 0\nset crash_recovery_angle = 10\nset crash_recovery_rate = 100\nset crash_limit_yaw = 200\nset crash_recovery = OFF\nset iterm_rotation = ON\nset smart_feedforward = OFF\nset iterm_relax = OFF\nset iterm_relax_type = GYRO\nset iterm_relax_cutoff = 11\nset iterm_windup = 40\nset iterm_limit = 150\nset pidsum_limit = 500\nset pidsum_limit_yaw = 400\nset yaw_lowpass_hz = 0\nset throttle_boost = 5\nset throttle_boost_cutoff = 15\nset acro_trainer_angle_limit = 20\nset acro_trainer_lookahead_ms = 50\nset acro_trainer_debug_axis = ROLL\nset acro_trainer_gain = 75\nset p_pitch = 40\nset i_pitch = 50\nset d_pitch = 26\nset f_pitch = 60\nset p_roll = 20\nset i_roll = 45\nset d_roll = 13\nset f_roll = 60\nset p_yaw = 80\nset i_yaw = 45\nset d_yaw = 0\nset f_yaw = 60\nset p_level = 50\nset i_level = 50\nset d_level = 75\nset level_limit = 55\nset horizon_tilt_effect = 75\nset horizon_tilt_expert_mode = OFF\nset abs_control_gain = 0\nset abs_control_limit = 90\nset abs_control_error_limit = 20\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"# profile\nprofile 0\n\nset dterm_lowpass_hz = 0\nset dterm_lowpass2_hz = 0\nset dterm_notch_cutoff = 0\nset p_pitch = 40\nset d_pitch = 26\nset p_roll = 20\nset d_roll = 13\nset p_yaw = 80\n\n# profile\nprofile 1\n\nset dterm_lowpass_type = BIQUAD\nset dterm_notch_cutoff = 0\n\n# profile\nprofile 2\n\nset dterm_notch_cutoff = 0\n\n# restore original profile selection\nprofile 2\n\n# rateprofile\nrateprofile 0\n\nset roll_rc_rate = 200\nset pitch_rc_rate = 200\nset yaw_rc_rate = 200\nset roll_expo = 50\nset pitch_expo = 50\nset yaw_expo = 90\n\n# rateprofile\nrateprofile 1\n\n\n# rateprofile\nrateprofile 2\n\n\n# rateprofile\nrateprofile 3\n\nset thr_expo = 25\nset roll_rc_rate = 155\nset tpa_breakpoint = 1500\n\n# rateprofile\nrateprofile 4\n\n\n# rateprofile\nrateprofile 5\n\n\n# restore original rateprofile selection\nrateprofile 3\n")))}c.isMDXComponent=!0}}]);